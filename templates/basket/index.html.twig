{% extends 'base.html.twig' %}

{% block title %}<title>Votre panier</title>{% endblock %}

{% block body %}
     {% if  items | length > 0 %}
         <table class="table">
             <thead>
             <tr>
                 <th>Produit</th>
                 <th>Prix</th>
                 <th>Photo</th>
                 <th>Quantit√©</th>
                 <th>Total</th>
             </tr>
             </thead>
             <tbody>
             {% for item in items %}
                 <tr>
                     <td>{{ item.product.name }}</td>
                     <td>{{ item.product.price }}</td>
                     <td><img src="{{ asset('/uploads/product/'~ item.product.image) }}" alt=""></td>
                     <td>{{ item.quantity }}</td>
                     <td>{{ item.product.price * item.quantity }}</td>

                     <td>
                         <a href="{{ path('basket_remove', {'id': item.product.id } )}}" class="btn btn-danger btn-sm">
                             <i class="fas fa-trash"></i>
                         </a>
                     </td>
                 </tr>
             {% endfor %}
             </tbody>
             <tfoot>
             <tr>
                 <td colspan="3" class="text-right">Total :</td>
                 <td>{{ total }}</td>
                 <td></td>
             <tr>

                 <td>
                     <form action="/charge" method="post" id="payment-form">
                         <div class="form-row">
                             <label for="card-element">
                                 Credit or debit card
                             </label>
                             <div id="card-element">
                                 <!-- A Stripe Element will be inserted here. -->
                             </div>

                             <!-- Used to display form errors. -->
                             <div id="card-errors" role="alert"></div>
                         </div>

                         <button>Submit Payment</button>
                     </form>
                 </td>
             </tr>
             </tr>
             </tfoot>
         </table>

    {% else %}

         <h3>Votre panier est vide !</h3>

    {% endif %}
{% endblock %}
